import{e as P,r as i,j as e,m as d,s as o}from"./index-kyaQirc8.js";import{N as E}from"./Notification-CUFDdadh.js";const T=()=>{const{user:r}=P(),p=i.useRef(null),[m,u]=i.useState(!1),[j,x]=i.useState(!1),[h,l]=i.useState({type:"",message:""}),[s,c]=i.useState({fullName:"",phone:"",avatarUrl:"",persona:"Swiss Explorer",budgetFocus:"Standard",preferences:[]}),v=["Swiss Explorer","Alpine Pro","Scenic Voyager","Luxury Traveler","Local Culture"],w=["Hiking","Skiing","Railway","Elite Stays","Photography","Nightlife"];i.useEffect(()=>{r&&c({fullName:r.user_metadata?.full_name||"",phone:r.user_metadata?.phone||"",avatarUrl:r.user_metadata?.avatar_url||"",persona:r.user_metadata?.persona||"Swiss Explorer",budgetFocus:r.user_metadata?.budget_focus||"Standard",preferences:r.user_metadata?.preferences||[]})},[r]);const f=a=>{c({...s,[a.target.name]:a.target.value})},k=a=>{c(t=>({...t,preferences:t.preferences.includes(a)?t.preferences.filter(n=>n!==a):[...t.preferences,a]}))},S=()=>{p.current?.click()},_=async a=>{const t=a.target.files[0];if(t){if(t.size>5*1024*1024){l({type:"error",message:"File too large. Max 5MB allowed."});return}x(!0);try{const n=t.name.split(".").pop(),g=`profile-pictures/${`${r.id}-${Math.random()}.${n}`}`,{error:b}=await o.storage.from("profile-pictures").upload(g,t);if(b)throw b;const{data:{publicUrl:y}}=o.storage.from("profile-pictures").getPublicUrl(g);c(C=>({...C,avatarUrl:y}));const{error:N}=await o.auth.updateUser({data:{avatar_url:y}});if(N)throw N;l({type:"success",message:"Profile picture updated."})}catch{l({type:"error",message:"Upload failed."})}finally{x(!1)}}},U=async a=>{a.preventDefault(),u(!0),l({type:"",message:""});try{const{error:t}=await o.auth.updateUser({data:{full_name:s.fullName,phone:s.phone,avatar_url:s.avatarUrl,persona:s.persona,budget_focus:s.budgetFocus,preferences:s.preferences}});if(t)throw t;l({type:"success",message:"Profile updated."})}catch(t){l({type:"error",message:t.message||"Update failed."})}finally{u(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx(E,{type:h.type,message:h.message,onClose:()=>l({type:"",message:""})}),e.jsx("div",{className:"h-40"}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 pb-32",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-16",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs(d.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"premium-glass p-12 text-center rounded-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-primary"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{onClick:S,className:"relative w-24 h-24 mx-auto mb-10 cursor-pointer group",children:[e.jsx("div",{className:`w-full h-full rounded-full border-4 border-primary/20 p-1.5 overflow-hidden transition-all group-hover:border-primary ${j?"animate-pulse":""}`,children:s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):e.jsx("div",{className:"w-full h-full rounded-full bg-slate-900 flex items-center justify-center text-4xl font-black italic text-primary",children:(s.fullName||r?.email||"?").charAt(0).toUpperCase()})}),e.jsx("div",{className:"absolute inset-0 bg-primary/40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-[10px] font-black uppercase tracking-widest text-white",children:"Edit"}),e.jsx("input",{type:"file",ref:p,onChange:_,accept:"image/*",className:"hidden"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter mb-2",children:s.fullName||"Traveler"}),e.jsx("p",{className:"text-primary font-bold uppercase tracking-widest text-xs mb-12 opacity-80",children:r?.email}),e.jsxs("div",{className:"flex justify-center gap-12 border-t border-white/5 pt-10",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-2xl font-black italic",children:"07"}),e.jsx("span",{className:"text-xs font-bold text-white/30 uppercase tracking-widest",children:"Tours"})]}),e.jsx("div",{className:"w-px h-10 bg-white/5"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-2xl font-black italic",children:"14"}),e.jsx("span",{className:"text-xs font-bold text-white/30 uppercase tracking-widest",children:"Saves"})]})]})]})]}),e.jsxs(d.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1},className:"premium-glass p-12 rounded-2xl",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-[0.4em] text-white/30 mb-8",children:"Adventure Badges"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:["ðŸ”ï¸","ðŸš‚","ï¿½","âŒš","â„ï¸","ï¿½","ï¿½","ï¿½"].map((a,t)=>e.jsx("div",{className:`aspect-square rounded-lg flex items-center justify-center text-xl bg-slate-900 border border-white/5 ${t>4?"opacity-10 grayscale":""}`,children:a},t))})]})]}),e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(d.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},className:"premium-glass p-12 md:p-16 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-16",children:[e.jsx("div",{className:"w-1.5 h-8 bg-primary rounded-full shadow-[0_0_10px_rgba(255,122,45,0.5)]"}),e.jsx("h3",{className:"text-3xl font-black italic uppercase tracking-tighter",children:"Your Profile"})]}),e.jsxs("form",{onSubmit:U,className:"space-y-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-white/30 ml-1",children:"Full Name"}),e.jsx("input",{name:"fullName",value:s.fullName,onChange:f,className:"premium-input"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-white/30 ml-1",children:"Phone Number"}),e.jsx("input",{name:"phone",value:s.phone,onChange:f,className:"premium-input"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-white/30 ml-1",children:"Travel Persona"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:v.map(a=>e.jsx("button",{type:"button",onClick:()=>c({...s,persona:a}),className:`px-6 py-3 rounded text-xs font-black uppercase tracking-widest transition-all ${s.persona===a?"bg-primary text-white shadow-lg shadow-primary/20":"bg-slate-900/50 text-white/40 border border-white/5 hover:border-primary/30"}`,children:a},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-widest text-white/30 ml-1",children:"Travel Interests"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:w.map(a=>e.jsxs("button",{type:"button",onClick:()=>k(a),className:`flex items-center gap-4 px-6 py-4 rounded border transition-all ${s.preferences.includes(a)?"border-primary bg-primary/10 text-white":"border-white/5 bg-slate-900/50 text-white/30 hover:border-primary/30"}`,children:[e.jsx("div",{className:`w-4 h-4 rounded-sm border flex items-center justify-center ${s.preferences.includes(a)?"bg-primary border-primary":"border-white/20"}`,children:s.preferences.includes(a)&&e.jsx("span",{className:"text-xs text-white",children:"âœ“"})}),e.jsx("span",{className:"text-xs font-black uppercase tracking-[0.2em]",children:a})]},a))})]}),e.jsx("div",{className:"pt-12 border-t border-white/5 flex justify-end",children:e.jsx("button",{type:"submit",disabled:m,className:"px-12 py-4 bg-primary text-white text-sm font-black uppercase tracking-[0.3em] rounded-full shadow-lg shadow-primary/30 hover:shadow-primary/50 hover:scale-105 transition-all disabled:opacity-50",children:m?"Saving...":"Save Changes"})})]})]})})]})})]})};export{T as default};
