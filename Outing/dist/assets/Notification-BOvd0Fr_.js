import{r as t,M as L,j as d,i as W,b as I,P as F,c as S,d as A,L as B,m as w}from"./index-DMhtMtUl.js";class D extends t.Component{getSnapshotBeforeUpdate(r){const e=this.props.childRef.current;if(e&&r.isPresent&&!this.props.isPresent){const s=e.offsetParent,u=W(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft,i.right=u-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:n,isPresent:r,anchorX:e,root:s}){const u=t.useId(),i=t.useRef(null),m=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=t.useContext(L);return t.useInsertionEffect(()=>{const{width:y,height:o,top:k,left:a,right:f}=m.current;if(r||!i.current||!y||!o)return;const p=e==="left"?`left: ${a}`:`right: ${f}`;i.current.dataset.motionPopId=u;const c=document.createElement("style");b&&(c.nonce=b);const h=s??document.head;return h.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${u}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${o}px !important;
            ${p}px !important;
            top: ${k}px !important;
          }
        `),()=>{h.contains(c)&&h.removeChild(c)}},[r]),d.jsx(D,{isPresent:r,childRef:i,sizeRef:m,children:t.cloneElement(n,{ref:i})})}const K=({children:n,initial:r,isPresent:e,onExitComplete:s,custom:u,presenceAffectsLayout:i,mode:m,anchorX:b,root:y})=>{const o=I(U),k=t.useId();let a=!0,f=t.useMemo(()=>(a=!1,{id:k,initial:r,isPresent:e,custom:u,onExitComplete:p=>{o.set(p,!0);for(const c of o.values())if(!c)return;s&&s()},register:p=>(o.set(p,!1),()=>o.delete(p))}),[e,o,s]);return i&&a&&(f={...f}),t.useMemo(()=>{o.forEach((p,c)=>o.set(c,!1))},[e]),t.useEffect(()=>{!e&&!o.size&&s&&s()},[e]),m==="popLayout"&&(n=d.jsx(H,{isPresent:e,anchorX:b,root:y,children:n})),d.jsx(F.Provider,{value:f,children:n})};function U(){return new Map}const j=n=>n.key||"";function P(n){const r=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&r.push(e)}),r}const G=({children:n,custom:r,initial:e=!0,onExitComplete:s,presenceAffectsLayout:u=!0,mode:i="sync",propagate:m=!1,anchorX:b="left",root:y})=>{const[o,k]=S(m),a=t.useMemo(()=>P(n),[n]),f=m&&!o?[]:a.map(j),p=t.useRef(!0),c=t.useRef(a),h=I(()=>new Map),[N,T]=t.useState(a),[g,v]=t.useState(a);A(()=>{p.current=!1,c.current=a;for(let x=0;x<g.length;x++){const l=j(g[x]);f.includes(l)?h.delete(l):h.get(l)!==!0&&h.set(l,!1)}},[g,f.length,f.join("-")]);const R=[];if(a!==N){let x=[...a];for(let l=0;l<g.length;l++){const C=g[l],E=j(C);f.includes(E)||(x.splice(l,0,C),R.push(C))}return i==="wait"&&R.length&&(x=R),v(P(x)),T(a),null}const{forceRender:$}=t.useContext(B);return d.jsx(d.Fragment,{children:g.map(x=>{const l=j(x),C=m&&!o?!1:a===g||f.includes(l),E=()=>{if(h.has(l))h.set(l,!0);else return;let M=!0;h.forEach(z=>{z||(M=!1)}),M&&($?.(),v(c.current),m&&k?.(),s&&s())};return d.jsx(K,{isPresent:C,initial:!p.current||e?void 0:!1,custom:r,presenceAffectsLayout:u,mode:i,root:y,onExitComplete:C?void 0:E,anchorX:b,children:x},l)})})},V={success:d.jsx(w.span,{className:"text-2xl",initial:{scale:.8},animate:{scale:[1.1,1,1.1],rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:1.2,repeatType:"loop"},children:"✅"}),error:d.jsx(w.span,{className:"text-2xl",initial:{scale:.8},animate:{scale:[1.1,1,1.1],rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:1.2,repeatType:"loop"},children:"❌"}),info:d.jsx(w.span,{className:"text-2xl",initial:{scale:.8},animate:{scale:[1.1,1,1.1],rotate:[0,8,-8,0]},transition:{repeat:1/0,duration:1.2,repeatType:"loop"},children:"ℹ️"})},_=({type:n="info",message:r,onClose:e})=>{if(!r)return null;let s="bg-blue-100 text-blue-800 border-blue-300 dark:bg-dark-glass dark:text-blue-200 dark:border-blue-500";return n==="success"&&(s="bg-green-100 text-green-800 border-green-300 dark:bg-dark-glass dark:text-green-300 dark:border-green-500"),n==="error"&&(s="bg-red-100 text-red-800 border-red-300 dark:bg-dark-glass dark:text-red-300 dark:border-red-500"),t.useEffect(()=>{if(!e)return;const u=setTimeout(e,3500);return()=>clearTimeout(u)},[r,e]),d.jsx(G,{children:d.jsxs(w.div,{initial:{opacity:0,y:-30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-30,scale:.98},transition:{type:"spring",stiffness:340,damping:24},className:`fixed top-6 left-1/2 -translate-x-1/2 z-50 border px-6 py-3 rounded-2xl shadow-2xl flex items-center gap-4 min-w-[260px] max-w-[90vw] transition-all duration-300 transform ${s}`,role:"alert",style:{backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:[V[n],d.jsx("span",{className:"font-medium text-base break-words flex-1",children:r}),e&&d.jsx("button",{onClick:e,className:"ml-2 text-2xl font-bold text-gray-400 hover:text-red-500 transition-colors rounded-full w-8 h-8 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-red-400","aria-label":"Close notification",children:"×"})]},r)})};export{G as A,_ as N};
