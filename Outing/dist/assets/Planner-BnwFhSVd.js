import{u as y,r as d,j as e,m as N,s as p}from"./index-DMhtMtUl.js";import{N as f}from"./Notification-BOvd0Fr_.js";const w=()=>{const h=y(),[t,u]=d.useState({title:"",type:"",budget:"",participants:"",startDate:"",endDate:"",startTime:"",endTime:"",location:"",range:""}),[c,o]=d.useState(""),[m,a]=d.useState({type:"",message:""}),[x,l]=d.useState(!1),s=r=>{u({...t,[r.target.name]:r.target.value})},g=async r=>{r.preventDefault(),a({type:"",message:""}),o(""),l(!0);for(const[i,n]of Object.entries(t))if(typeof n=="string"&&n.trim()===""){o("All fields are required."),l(!1);return}try{const{data:{user:i},error:n}=await p.auth.getUser();if(n||!i){a({type:"error",message:"Please login to save your plan."}),l(!1);return}const{data:j,error:b}=await p.from("itineraries").insert([{title:t.title.trim(),type:t.type.trim(),budget:parseInt(t.budget),participants:parseInt(t.participants),startDate:t.startDate,endDate:t.endDate,startTime:t.startTime,endTime:t.endTime,location:t.location.trim(),range:t.range.trim(),user_id:i.id}]).select().single();b?a({type:"error",message:"Database error. Please try again."}):(localStorage.setItem("currentItinerary",JSON.stringify(j)),a({type:"success",message:"Itinerary generated! Redirecting..."}),setTimeout(()=>h("/result"),1500))}catch{a({type:"error",message:"Something went wrong."})}finally{l(!1)}};return e.jsxs("section",{className:"max-w-4xl mx-auto px-4 py-16 sm:py-24",children:[e.jsx(f,{type:m.type,message:m.message,onClose:()=>a({type:"",message:""})}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs(N.h2,{className:"text-4xl md:text-6xl font-black mb-4 tracking-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:["Plan Your ",e.jsx("span",{className:"navbar-logo-gradient",children:"Masterpiece"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Every great journey starts with a single high-quality plan."})]}),e.jsxs("form",{onSubmit:g,className:"glass-card p-8 md:p-12 space-y-10",children:[c&&e.jsx("p",{className:"text-red-500 font-bold bg-red-50 p-4 rounded-xl border border-red-100",children:c}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-600/10 text-indigo-600 flex items-center justify-center font-bold",children:"1"}),e.jsx("h3",{className:"text-2xl font-bold",children:"The Basics"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Trip Title"}),e.jsx("input",{name:"title",onChange:s,className:"premium-input",placeholder:"e.g. Weekend in Bali"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Location"}),e.jsx("input",{name:"location",onChange:s,className:"premium-input",placeholder:"City or Destination"})]})]})]}),e.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-pink-600/10 text-pink-600 flex items-center justify-center font-bold",children:"2"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Group & Budget"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Participants"}),e.jsx("input",{name:"participants",type:"number",onChange:s,className:"premium-input",placeholder:"People count"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Total Budget (₹)"}),e.jsx("input",{name:"budget",type:"number",onChange:s,className:"premium-input",placeholder:"₹ Amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Trip Type"}),e.jsxs("select",{name:"type",onChange:s,className:"premium-input",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{children:"Adventure"}),e.jsx("option",{children:"Relaxation"}),e.jsx("option",{children:"Food & Culture"}),e.jsx("option",{children:"Family Fun"}),e.jsx("option",{children:"Romantic Getaway"})]})]})]})]}),e.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-600/10 text-amber-600 flex items-center justify-center font-bold",children:"3"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Timing"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Start Date"}),e.jsx("input",{name:"startDate",type:"date",onChange:s,className:"premium-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"End Date"}),e.jsx("input",{name:"endDate",type:"date",onChange:s,className:"premium-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Window Starts"}),e.jsx("input",{name:"startTime",type:"time",onChange:s,className:"premium-input"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Window Ends"}),e.jsx("input",{name:"endTime",type:"time",onChange:s,className:"premium-input"})]})]}),e.jsxs("div",{className:"space-y-2 !mt-10",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 ml-1",children:"Activity Radius"}),e.jsxs("select",{name:"range",onChange:s,className:"premium-input bg-indigo-50/50",children:[e.jsx("option",{value:"",children:"Choose how far you'll go"}),e.jsx("option",{children:"Walkable (under 5 KM)"}),e.jsx("option",{children:"Quick Ride (10 KM)"}),e.jsx("option",{children:"Day Explorer (25 KM)"}),e.jsx("option",{children:"Road Trip (50+ KM)"})]})]})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full py-5 rounded-2xl bg-gradient-to-tr from-indigo-600 via-fuchsia-500 to-pink-500 text-white font-black text-2xl shadow-2xl shadow-indigo-500/30 hover:scale-[1.01] active:scale-[0.99] transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:x?e.jsx("span",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["Generate Master Plan",e.jsx("span",{className:"text-3xl",children:"✨"})]})})]})]})};export{w as default};
